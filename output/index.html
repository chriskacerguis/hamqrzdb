<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KJ5DJC Callsign Lookup API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .demo-box {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }

        .demo-box h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        input[type="text"] {
            flex: 1;
            padding: 12px 16px;
            font-size: 16px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .code-block code {
            color: #f8f8f2;
        }

        .highlight {
            color: #a6e22e;
        }

        .string {
            color: #e6db74;
        }

        .comment {
            color: #75715e;
            font-style: italic;
        }

        .result-box {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            max-height: 500px;
            overflow-y: auto;
        }

        .result-box pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
        }

        .examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .example-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .example-card h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        .example-card .url {
            color: #667eea;
            font-family: monospace;
            font-size: 0.9em;
            word-break: break-all;
            display: block;
            margin: 10px 0;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            background: #667eea;
            color: white;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 5px;
        }

        .badge.success {
            background: #28a745;
        }

        .badge.info {
            background: #17a2b8;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid #dee2e6;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .input-group {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>KJ5DJC Callsign Lookup</h1>
            <p>Fast, free, and open-source callsign data API</p>
        </header>

        <div class="content">
            <!-- Stats Section -->
            <div class="stats">
                <div class="stat-card">
                    <span class="number">1.5M+</span>
                    <span class="label">Callsigns</span>
                </div>
                <div class="stat-card">
                    <span class="number">&lt;10ms</span>
                    <span class="label">Response Time</span>
                </div>
                <div class="stat-card">
                    <span class="number">24/7</span>
                    <span class="label">Availability</span>
                </div>
                <div class="stat-card">
                    <span class="number">100%</span>
                    <span class="label">Open Source</span>
                </div>
            </div>

            <!-- Live Demo Section -->
            <div class="section">
                <h2>üîç Try It Now</h2>
                <div class="demo-box">
                    <h3>Enter a Callsign</h3>
                    <p style="margin-bottom: 15px; color: #6c757d;">Try examples: KJ5DJC, W1AW, K6MHE, N0CALL (invalid)</p>
                    <div class="input-group">
                        <input type="text" id="callsignInput" placeholder="Enter callsign (e.g., KJ5DJC)" value="KJ5DJC">
                        <button onclick="lookupCallsign()">üîé Lookup</button>
                    </div>
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>Looking up callsign...</p>
                    </div>
                    <div id="result"></div>
                </div>
            </div>

            <!-- API Documentation Section -->
            <div class="section">
                <h2>üìö API Documentation</h2>
                
                <h3 style="margin-top: 30px; color: #495057;">Endpoint</h3>
                <div class="code-block">
<code><span class="highlight">GET</span> <span class="string">/v1/{callsign}/json/{appname}</span></code>
                </div>

                <h3 style="margin-top: 30px; color: #495057;">Parameters</h3>
                <ul style="margin: 20px 0 20px 20px; line-height: 2;">
                    <li><strong>{callsign}</strong> - Amateur radio callsign (e.g., KJ5DJC, W1AW)</li>
                    <li><strong>{appname}</strong> - Your application name (required for compatibility)</li>
                </ul>

                <h3 style="margin-top: 30px; color: #495057;">Response Format</h3>
                <p style="margin: 15px 0;">All responses return <span class="badge success">HTTP 200</span> with JSON data:</p>
                
                <div class="code-block">
<code>{
  <span class="string">"hamdb"</span>: {
    <span class="string">"version"</span>: <span class="string">"1"</span>,
    <span class="string">"callsign"</span>: {
      <span class="string">"call"</span>: <span class="string">"KJ5DJC"</span>,
      <span class="string">"class"</span>: <span class="string">"G"</span>,
      <span class="string">"expires"</span>: <span class="string">"11/18/2033"</span>,
      <span class="string">"status"</span>: <span class="string">"A"</span>,
      <span class="string">"grid"</span>: <span class="string">"EM10ci"</span>,
      <span class="string">"lat"</span>: <span class="string">"30.3416503"</span>,
      <span class="string">"lon"</span>: <span class="string">"-97.7548379"</span>,
      <span class="string">"fname"</span>: <span class="string">"CHRIS"</span>,
      <span class="string">"name"</span>: <span class="string">"KACERGUIS"</span>,
      <span class="string">"addr1"</span>: <span class="string">"5900 Balcones Drive STE 26811"</span>,
      <span class="string">"addr2"</span>: <span class="string">"AUSTIN"</span>,
      <span class="string">"state"</span>: <span class="string">"TX"</span>,
      <span class="string">"zip"</span>: <span class="string">"78731"</span>,
      <span class="string">"country"</span>: <span class="string">"United States"</span>
    },
    <span class="string">"messages"</span>: {
      <span class="string">"status"</span>: <span class="string">"OK"</span>
    }
  }
}</code>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section">
                <h2>üí° Usage Examples</h2>
                <div class="examples">
                    <div class="example-card">
                        <h4>üåê cURL</h4>
                        <div class="code-block" style="margin-top: 10px;">
<code>curl https://your-domain.com/v1/KJ5DJC/json/myapp</code>
                        </div>
                    </div>

                    <div class="example-card">
                        <h4>üêç Python</h4>
                        <div class="code-block" style="margin-top: 10px;">
<code><span class="highlight">import</span> requests

response = requests.get(
  <span class="string">'https://your-domain.com/v1/KJ5DJC/json/myapp'</span>
)
data = response.json()</code>
                        </div>
                    </div>

                    <div class="example-card">
                        <h4>üì± JavaScript</h4>
                        <div class="code-block" style="margin-top: 10px;">
<code><span class="highlight">fetch</span>(<span class="string">'/v1/KJ5DJC/json/myapp'</span>)
  .then(r => r.json())
  .then(data => console.log(data));</code>
                        </div>
                    </div>

                    <div class="example-card">
                        <h4>‚òï Java</h4>
                        <div class="code-block" style="margin-top: 10px;">
<code>URL url = <span class="highlight">new</span> URL(
  <span class="string">"https://your-domain.com/v1/KJ5DJC/json/myapp"</span>
);
HttpURLConnection con = 
  (HttpURLConnection) url.openConnection();</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <div class="section">
                <h2>‚ú® Features</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">‚ö° Fast</h4>
                        <p>Sub-10ms response times with nginx static file serving</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">üåç CORS Enabled</h4>
                        <p>Works seamlessly with web applications</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">üì¶ Compressed</h4>
                        <p>Gzip compression for smaller transfers</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">üîÑ Daily Updates</h4>
                        <p>Fresh data from FCC ULS database</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">üìç Location Data</h4>
                        <p>Includes coordinates and grid squares</p>
                    </div>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="color: #667eea; margin-bottom: 10px;">üíØ HamDB Compatible</h4>
                        <p>Drop-in replacement for HamDB API</p>
                    </div>
                </div>
            </div>

            <!-- Data Fields Section -->
            <div class="section">
                <h2>üìã Data Fields</h2>
                <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Field</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>call</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">Callsign</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>class</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">License class (N, T, G, A, P)</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>status</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">License status (A=Active, E=Expired, C=Canceled, T=Terminated)</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>expires</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">Expiration date (MM/DD/YYYY)</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>grid</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">Maidenhead grid square (6 characters)</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>lat</code> / <code>lon</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">Coordinates (decimal degrees)</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>fname</code> / <code>name</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">First and last name</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>addr1</code> / <code>addr2</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">Street address and city</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;"><code>state</code> / <code>zip</code></td>
                            <td style="padding: 12px; border-bottom: 1px solid #dee2e6;">State and ZIP code</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <footer>
            <p style="margin-bottom: 10px;">
                <strong>Data Source:</strong> FCC Universal Licensing System (ULS)<br>
                Updated daily with official FCC records
            </p>
            <p style="margin-top: 20px;">
                Open source project ‚Ä¢ <a href="https://github.com/chriskacerguis/hamqrzdb" target="_blank">View on GitHub</a><br>
                Inspired by <a href="https://github.com/k3ng/hamdb" target="_blank">k3ng/hamdb</a>
            </p>
            <p style="margin-top: 20px; color: #495057;">
                Made with ‚ù§Ô∏è by <strong><a href="https://github.com/chriskacerguis" target="_blank" style="color: #667eea; text-decoration: none;">KJ5DJC</a></strong> in Austin, TX
            </p>
        </footer>
    </div>

    <script>
        // Auto-focus input on page load
        document.getElementById('callsignInput').focus();

        // Allow Enter key to submit
        document.getElementById('callsignInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                lookupCallsign();
            }
        });

        async function lookupCallsign() {
            const callsign = document.getElementById('callsignInput').value.trim().toUpperCase();
            const loading = document.getElementById('loading');
            const resultDiv = document.getElementById('result');

            if (!callsign) {
                resultDiv.innerHTML = '<div class="result-box" style="border-color: #dc3545; color: #dc3545;">Please enter a callsign</div>';
                return;
            }

            // Show loading
            loading.classList.add('active');
            resultDiv.innerHTML = '';

            try {
                const response = await fetch(`/v1/${callsign}/json/demo`);
                const data = await response.json();

                // Hide loading
                loading.classList.remove('active');

                // Check if callsign was found
                const status = data.hamdb.messages.status;
                const isFound = status === 'OK' && data.hamdb.callsign.call !== 'NOT_FOUND';

                // Display result
                let html = '<div class="result-box">';
                
                if (isFound) {
                    const cs = data.hamdb.callsign;
                    html += '<h3 style="color: #28a745; margin-bottom: 15px;">‚úÖ Callsign Found</h3>';
                    html += '<table style="width: 100%; border-collapse: collapse;">';
                    html += `<tr><td style="padding: 8px; font-weight: 600;">Callsign:</td><td style="padding: 8px;">${cs.call}</td></tr>`;
                    html += `<tr><td style="padding: 8px; font-weight: 600;">Name:</td><td style="padding: 8px;">${cs.fname} ${cs.name}</td></tr>`;
                    html += `<tr><td style="padding: 8px; font-weight: 600;">Class:</td><td style="padding: 8px;">${cs.class}</td></tr>`;
                    html += `<tr><td style="padding: 8px; font-weight: 600;">Status:</td><td style="padding: 8px;">${cs.status}</td></tr>`;
                    if (cs.expires) html += `<tr><td style="padding: 8px; font-weight: 600;">Expires:</td><td style="padding: 8px;">${cs.expires}</td></tr>`;
                    if (cs.grid) html += `<tr><td style="padding: 8px; font-weight: 600;">Grid:</td><td style="padding: 8px;">${cs.grid}</td></tr>`;
                    if (cs.lat && cs.lon) html += `<tr><td style="padding: 8px; font-weight: 600;">Coordinates:</td><td style="padding: 8px;">${cs.lat}, ${cs.lon}</td></tr>`;
                    if (cs.addr1) html += `<tr><td style="padding: 8px; font-weight: 600;">Address:</td><td style="padding: 8px;">${cs.addr1}<br>${cs.addr2}, ${cs.state} ${cs.zip}</td></tr>`;
                    html += '</table>';
                } else {
                    html += '<h3 style="color: #dc3545; margin-bottom: 15px;">‚ùå Callsign Not Found</h3>';
                    html += `<p>The callsign <strong>${callsign}</strong> was not found in the FCC database.</p>`;
                }

                html += '<details style="margin-top: 20px;"><summary style="cursor: pointer; font-weight: 600; color: #667eea;">View Raw JSON</summary>';
                html += '<pre style="margin-top: 10px; padding: 15px; background: #f8f9fa; border-radius: 6px; overflow-x: auto;">' + JSON.stringify(data, null, 2) + '</pre>';
                html += '</details>';
                html += '</div>';

                resultDiv.innerHTML = html;

            } catch (error) {
                loading.classList.remove('active');
                resultDiv.innerHTML = '<div class="result-box" style="border-color: #dc3545; color: #dc3545;"><h3>‚ùå Error</h3><p>' + error.message + '</p></div>';
            }
        }

        // Example callsigns for quick testing
        function quickLookup(callsign) {
            document.getElementById('callsignInput').value = callsign;
            lookupCallsign();
        }
    </script>
</body>
</html>
